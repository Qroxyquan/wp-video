var _={};_.canPlayM3U8=!!document.createElement("video").canPlayType("application/x-mpegURL")?true:false;_.isChromeOnMac=function(){var e=navigator.userAgent.toLowerCase();if(e.match(/Macintosh/i)&&e.match(/Chrome/i))return true;else return false};_.each=function(e,r,t,i,a){if(typeof e.length=="number"){for(i=0,a=e.length;i<a;i++)if(r.call(t,e[i],i)==false)break}else for(i in e)if(r.call(t,e[i],i)==false)break};_.extend=function(e){var r=arguments.length,t=1,i;while(t<r){i=arguments[t];for(var a in i){if(i.hasOwnProperty(a)){e[a]=i[a]}}t++}return e};_.queryString=function(e){var r=[];_.each(e,function(e,t){e!==undefined&&r.push(t+"="+e)});return r.join("&")};_.byId=function(e){return document.getElementById(e)};_.rNode=function(e){try{e.parentNode.removeChild(e)}catch(r){}};_.cTag=function(e,r,t,i){var a=document.createElement(e),n="";_.each(r||{},function(e,r){n+=[r,":",e,";"].join("")}),a.style.cssText=n;_.each(t||{},function(e,r){a.setAttribute(r,e)});return i&&i.appendChild(a)||a};_.jsonp=function(e,r,t,i){var a,n="HTML5PlayerBookMarkCodeByZythum"+ +new Date+Math.random().toString().replace(".","");var o=e.indexOf("?")>=0;r=_.queryString(r);if(r.length)r=(o?"&":"?")+r;i=[o||r.length?"&":"?",i||"callback","=",n].join("");window[n]=function(){t&&t.apply(this,arguments);delete window[n];_.rNode(a)};(a=_.cTag("script",{},{},document.body)).src=e+r+i};_.times=function(){return(new Date).getTime()};_.log=function(e){window.console||window.console(e)};_.isMobile=function(){var e=navigator.userAgent.toLowerCase();var r=e.match(/ipad/i)=="ipad";var t=e.match(/iphone os/i)=="iphone os";var i=e.match(/midp/i)=="midp";var a=e.match(/rv:1.2.3.4/i)=="rv:1.2.3.4";var n=e.match(/ucweb/i)=="ucweb";var o=e.match(/android/i)=="android";var s=e.match(/windows ce/i)=="windows ce";var d=e.match(/windows mobile/i)=="windows mobile";var c=e.match(/windows phone/i)=="windows phone";if(r||t||i||a||n||o||s||d||c){return true}else{return false}};function show(e,r,t){try{var i=_.byId(e);i.innerHTML="";var a=_.cTag("video",null,{src:r,controls:"controls",preload:"preload",width:t.width,height:t.height},i)}catch(n){}}function pptv(e,r,t,i){function a(e){var r,t,i,a,o,s,d,c,h,l;for(var f in e.childNodes){var p=e.childNodes[f];if(p.tagName==="channel"){s=p.nm;l=p.vt;d=p.dur;for(var v in p.childNodes){var u=p.childNodes[v];if(u.tagName==="live"){c=u.start;h=u.end}if(u.tagName==="file"||u.tagName==="stream"){var m=u.tagName==="file"?u.cur:u.cft;for(var g in u.childNodes){var y=u.childNodes[g];if(y.ft===m){r=m;t=y.rid;break}}}if(r){break}}}else{if(p.tagName==="dt"&&(p.ft==r||!p.ft)){for(var _ in p.childNodes){var w=p.childNodes[_];if(w.tagName==="sh"){i=w.childNodes[0]}else{if(w.tagName==="key"){a=w.childNodes[0]}}}}}}if(r!==undefined&&t&&i){t=t.replace(".mp4","");if(l==5){n.videoType=20;o="http://"+i+"/live/5/60/"+t+".m3u8?type="+n.loadType+"&begin="+c+"&end="+h}else{n.videoType=1;o="http://"+i+(n.islumia?"/w/":"/")+t+".m3u8?type="+n.loadType;o=n.islumia?o.replace("m3u8","mp4"):o}o+=a?"&k="+a:"";o+=n.segment?"&segment="+n.segment:""}else{}return o}var n={};if(_.canPlayM3U8){n.loadType="m3u8.web.pad"}else if(_.isChromeOnMac()||_.isMobile()){n.loadType="mpptv.wp";n.islumia=true}_.jsonp("http://web-play.pptv.com/webplay3-0-"+e+".xml",{version:4,type:n.loadType,kk:r,o:"v.pptv.com"},function(e){var r=a(e);if(_.canPlayM3U8){show(t,r,i)}else if(_.isChromeOnMac()||_.isMobile()){show(t,r,i)}},"cb")}function sina(e,r,t,i){if(r==1){_.jsonp("http://video.sina.com.cn/interface/video_ids/video_ids.php",{v:e},function(e){var r=e.ipad_vid;var a="http://v.iask.com/v_play_ipad.php?vid="+r+"&tags=newsList_web";show(t,a,i)})}else if(r==2){show(t,"http://v.iask.com/v_play_ipad.php?vid="+e+"&tags=newsList_web",i)}}function youku(e,r,t){var i="b4et";var a="boa4";var n="4";var o="1";var s;var d;var c;function h(e){if(!e)return"";var e=e.toString(),r,t,i,a,n,o=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];a=e.length;i=0;for(n="";i<a;){do r=o[e.charCodeAt(i++)&255];while(i<a&&-1==r);if(-1==r)break;do t=o[e.charCodeAt(i++)&255];while(i<a&&-1==t);if(-1==t)break;n+=String.fromCharCode(r<<2|(t&48)>>4);do{r=e.charCodeAt(i++)&255;if(61==r)return n;r=o[r]}while(i<a&&-1==r);if(-1==r)break;n+=String.fromCharCode((t&15)<<4|(r&60)>>2);do{t=e.charCodeAt(i++)&255;if(61==t)return n;t=o[t]}while(i<a&&-1==t);if(-1==t)break;n+=String.fromCharCode((r&3)<<6|t)}return n}function l(e){if(!e)return"";var e=e.toString(),r,t,i,a,n,o;i=e.length;t=0;for(r="";t<i;){a=e.charCodeAt(t++)&255;if(t==i){r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2);r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((a&3)<<4);r+="==";break}n=e.charCodeAt(t++);if(t==i){r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2);r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((a&3)<<4|(n&240)>>4);r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((n&15)<<2);r+="=";break}o=e.charCodeAt(t++);r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2);r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((a&3)<<4|(n&240)>>4);r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((n&15)<<2|(o&192)>>6);r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o&63)}return r}function f(e,r){for(var t=[],i=0,a,n="",o=0;256>o;o++)t[o]=o;for(o=0;256>o;o++)i=(i+t[o]+e.charCodeAt(o%e.length))%256,a=t[o],t[o]=t[i],t[i]=a;for(var s=i=o=0;s<r.length;s++)o=(o+1)%256,i=(i+t[o])%256,a=t[o],t[o]=t[i],t[i]=a,n+=String.fromCharCode(r.charCodeAt(s)^t[(t[o]+t[i])%256]);return n}function p(e,r){for(var t=[],i=0;i<e.length;i++){for(var a=0,a="a"<=e[i]&&"z">=e[i]?e[i].charCodeAt(0)-97:e[i]-0+26,n=0;36>n;n++)if(r[n]==a){a=n;break}t[i]=25<a?a-26:String.fromCharCode(a+97)}return t.join("")}function v(e,r){this._sid=d;this._seed=e.seed;this._fileType=r;var t=new u(this._seed);this._streamFileIds=e.streamfileids;this._videoSegsDic={};for(r in e.segs){for(var i=[],a=0,n=0;n<e.segs[r].length;n++){var o=e.segs[r][n],s={};s.no=o.no;s.size=o.size;s.seconds=o.seconds;o.k&&(s.key=o.k);s.fileId=this.getFileId(e.streamfileids,r,parseInt(n),t);s.type=r;s.src=this.getVideoSrc(o.no,e,r,s.fileId);i[a++]=s}this._videoSegsDic[r]=i}}function u(e){this._randomSeed=e;this.cg_hun()}u.prototype={cg_hun:function(){this._cgStr="";for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/\\:._-1234567890",r=e.length,t=0;t<r;t++){var i=parseInt(this.ran()*e.length);this._cgStr+=e.charAt(i);e=e.split(e.charAt(i)).join("")}},cg_fun:function(e){for(var e=e.split("*"),r="",t=0;t<e.length-1;t++)r+=this._cgStr.charAt(e[t]);return r},ran:function(){this._randomSeed=(211*this._randomSeed+30031)%65536;return this._randomSeed/65536}};v.prototype={getFileId:function(e,r,t,i){for(var a in e)if(a==r){streamFid=e[a];break}if(""==streamFid)return"";r=i.cg_fun(streamFid);e=r.slice(0,8);t=t.toString(16);1==t.length&&(t="0"+t);t=t.toUpperCase();r=r.slice(10,r.length);return e+t+r},getVideoSrc:function(e,r,t,i,n,h){if(!r.videoid||!t)return"";var v={flv:0,flvhd:0,mp4:1,hd2:2,"3gphd":1,"3gp":0}[t],u={flv:"flv",mp4:"mp4",hd2:"flv","3gphd":"mp4","3gp":"flv"}[t],m=e.toString(16);1==m.length&&(m="0"+m);var g=r.segs[t][e].seconds,e=r.segs[t][e].k;if(""==e||-1==e)e=r.key2+r.key1;t="";r.show&&(t=r.show.show_paid?"&ypremium=1":"&ymovie=1");r="/player/getFlvPath/sid/"+d+"_"+m+"/st/"+u+"/fileid/"+i+"?K="+e+"&hd="+v+"&myp=0&ts="+g+"&ypp=0"+t;i=encodeURIComponent(l(f(p(a+"poz"+o,[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26]).toString(),d+"_"+i+"_"+c)));r=r+("&ep="+i)+"&ctype=12&ev=1"+("&token="+c);r+="&oip="+s.data[0].ip;return"http://k.youku.com"+(r+((n?"/password/"+n:"")+(h?h:"")))}};_.jsonp("http://v.youku.com/player/getPlaylist/VideoIDS/"+e+"/Pf/4/ctype/12/ev/1",{},function(u){s=u;var m=u.data[0],g=f(p(i+"o0b"+n,[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26]).toString(),h(m.ep));g=g.split("_");d=g[0];c=g[1];if(!/PlayStation/.test(window.navigator.userAgent)&&_.canPlayM3U8){var y=encodeURIComponent(l(f(p(a+"poz"+o,[19,1,4,7,30,14,28,8,24,17,6,35,34,16,9,10,13,22,32,29,31,21,18,3,2,23,25,27,11,20,5,15,12,0,33,26]).toString(),d+"_"+e+"_"+c)));var w=m.ip;show(r,"http://pl.youku.com/playlist/m3u8?vid="+e+"&type=flv&ctype=12&keyframe=1&ep="+y+"&sid="+d+"&token="+c+"&ev=1&oip="+w,t)}else if(_.isChromeOnMac()||_.isMobile()){var k=new v(m);show(r,k._videoSegsDic["3gphd"][0].src,t)}},"__callback")}function tudou(e,r,t){var i=e;var a="b4et";var o="boa4";var s="4";var d="1";var c;var h;var l;var f="MzU2NDY1MzIz",p="NjMxMzAzMw==",v="NTM0NjYzOA==",u="MzczMjMxMzc2";function m(e){var r=(w(atob(decodeURIComponent(e.ep)),I)||"_").split("_");e.sid=r[0];e.tk=r[1];return e}function g(e,r){var t=[];var i=window.atob(e+(r?p:v));for(var a=0,n=i.length;a<n;a+=2)t.push(i.substring(a,a+2));return t}function y(e,r){e=e(r?u:f,r);var t=[];for(var i=0,a=e.length;i<a;i++)t.push(String.fromCharCode(parseInt(e[i],16)));return t.join("")}function w(e,r){var t=[],i=0,a,n="";for(var o=0;o<256;o++)t[o]=o;for(o=0;o<256;o++){i=(i+t[o]+r.charCodeAt(o%r.length))%256;a=t[o];t[o]=t[i];t[i]=a}o=0;i=0;for(var s=0;s<e.length;s++){o=(o+1)%256;i=(i+t[o])%256;a=t[o];t[o]=t[i];t[i]=a;n+=String.fromCharCode(e.charCodeAt(s)^t[(t[o]+t[i])%256])}return n}function k(e,r,t){var i={2:"flv",3:"mp4",4:"mp4",5:"hd2",99:"hd2"}[r||2];var a={vid:e.videoid,type:i,keyframe:1,ts:+new Date,sid:e.sid,token:e.tk,ctype:62,ev:1,oip:e.ip,ep:M(e.sid,e.videoid,e.tk,true),yktk:t};var n="http://pl.youku.com/playlist/m3u8?"+_.queryString(a)+b(e.videoid);return n}function b(e){var r="&vid="+e+"&uc_param_str=xk";return r}function C(e,r){var t=A(r);return[e,t].join("_")}function S(e,r){var t=A(r);return e.substring(0,8)+t+e.substring(10)}function A(e){var r=(e||0).toString(16);return r.length>1?r:"0"+r}function M(e,r,t,i){var a=[e,r,t].join("_");var n=btoa(w(a,j));if(!i)n=encodeURIComponent(n);return n}function N(e,i){var a=e.segs["3gphd"]||e.segs["mp4"];var n=e.streamfileids["3gphd"]||e.streamfileids["mp4"];if(a)a.forEach(function(i,a){if(i.k==-1)return;var o=C(e.sid,a);var s=S(n,a);var d=M(e.sid,s,e.tk);_.jsonp("http://k.youku.com/player/getFlvPath/sid/"+o+"/st/mp4/fileid/"+s,{ctype:62,ev:1,hd:1,mpy:0,ts:i.seconds,token:e.tk,oip:e.ip,ep:d,K:i.k},function(e){if(e&&e[0]&&e[0].server){i.url=e[0].server;show(r,i.url,t)}})})}var I=y(g,0);var j=y(g,1);var T=!_.canPlayM3U8?"m3u8":"mp4";_.jsonp("http://v.youku.com/player/getPlaylist/VideoIDS/"+i+"/Pf/4/Sc/2",{ctype:62,ev:1},function(e){var i=e.data[0];var a=e.controller||{};var o=e.user||{};var s=i.show||{};var d={download:a.download_disabled||false,xplayer:a.xplayer_disable||false,app:a.app_disable||false,stage:parseInt(s.stage)||1,isVip:o.vip||false};var c=m(i);if(i.error_code&&i.error_code<0){d.errorCode=i.error_code;n("",d)}else if("m3u8"==T)show(r,k(c,2,""),t);else if("mp4"==T)N(c,d)},"__callback")}